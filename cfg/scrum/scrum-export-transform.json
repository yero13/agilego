{
	"transformation-sets": {
		"raw-transform": {
			"db": {
				"src.db": "scrum-api",
				"dest.db": "jira-export"
			},
			"transformations": {
				"sprint-assignments": {
					"type": "dataset",
					"cfg": {
						"src.collection": "sprint.assignments",
						"dest.collection": "sprint.assignments_raw",
						"transformation": {
							"transform_values": {
								"assignment2json": "row.update({'json': json.dumps(row)})",
								"assignment2label": "row.update({'label': '{}_{}'.format(row['group'], row['date'])})"
							}
						},
						"fields": ["key", "label", "json"]						
					}
				}
			}
		},
		"integration-transform": {
			"db": {
				"src.db": "jira-export",
				"dest.db": "jira-export"
			},
			"transformations": {
				"sprint-assignment-search": {
					"type": "transpose_to_array",
					"cfg": {
						"src.collection": "sprint.assignments_raw",
						"dest.collection": "sprint.assignments_search_labels",
						"transformation": {
								"key": "key",
								"values": "label"
						}						
					}
				},
				"sprint-assignment-json": {
					"type": "transpose_to_array",
					"cfg": {
						"src.collection": "sprint.assignments_raw",
						"dest.collection": "sprint.assignments_json",
						"transformation": {
								"key": "key",
								"values": "json"
						}
					}
				}				
			}
		}
	}
}
