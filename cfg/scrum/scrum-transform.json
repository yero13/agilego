{
	"version": 0.1,
	"transformation-sets": {
		"src-transform": {
			"db": {
				"src.db": "jira-import",
				"dest.db": "scrum-transform"
			},
			"transformations": {
				"sprint-timeline": {
					"type": "single_object",
					"cfg": {
						"src.collection": "sprint",
						"dest.collection": "sprint.timeline",
						"transformation": {
							"timeline": "obj['timeline'] = pd.date_range(obj['startDate'], obj['endDate']).strftime('%Y-%m-%d').tolist()"
						},
						"fields": ["timeline"]
					}
				},
				"sprint-definition": {
					"type": "single_object",
					"cfg": {
						"src.collection": "sprint",
						"dest.collection": "sprint.definition"					
					}
				},
				"sprint-all_items": {
					"type": "dataset",
					"cfg": {
						"src.collection": "backlog",
						"dest.collection": "sprint.all_items",
						"transformation": {
							"estimate": "dataset['estimate'] = dataset['estimate']/3600"
						}						
					}
				}
			}
		},
		"int-transform": {
			"db": {
				"src.db": "scrum-transform",
				"dest.db": "scrum-transform"
			},
			"transformations": {
				"subtasks": {
					"type": "transpose_array",
					"cfg": {
						"src.collection": "sprint.all_items",
						"dest.collection": "sprint.idx_subtasks",
						"transformation": {
							"l1key": "parent",
							"l2key": "key"
						}
					}
				}			
			}
		}
	}
}
